build ?= arm64

CC		= gcc
CPP		= g++

CFLAGS	= -g
LDFLAGS = 

#ifeq "$(build)" "IntOverflow"
#	CFLAGS += -g
#else ifeq "$(build)" "IntOverflownx"
#	CFLAGS += -g
#endif

#编译之前要创建DEPS目录，确保目录存在
#前面加@表示隐藏命令的执行打印

$(build): mk IntOverflow IntOverflowNX IntOverflowSP

mk:
	@if [ ! -d $(build) ]; then mkdir -p $(build);fi;

IntOverflow: IntOverflow.c
	$(CC) -o $(build)/$@  $(CFLAGS) -fno-stack-protector -z execstack -D_FORTIFY_SOURCE=0 $<

IntOverflowNX: IntOverflow.c
	$(CC) -o $(build)/$@  $(CFLAGS) -fno-stack-protector -D_FORTIFY_SOURCE=0 $<

IntOverflowSP: IntOverflow.c
	$(CC) -o $(build)/$@  $(CFLAGS) $<

clean:
	@rm -rf arm64
	@rm -rf x64

